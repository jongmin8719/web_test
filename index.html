<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>비플페이</title>
<link rel="stylesheet" href="welfare_reset.css">
<link rel="stylesheet" href="welfare.css">
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="welfare-ui.js"></script>
</head>

<body>
	<div class="wrap">
		<!-- 헤더 -->
		<header class="header position-sticky">
			<nav class="header__navi">
				<a href="#none" class="header__btn btn-back">
					<span class="blind">이전페이지로</span>
				</a>
			</nav>
			<div class="header__title-wrap">
				<h1 class="page-name"><span>본인인증</span></h1>
			</div>
		</header>

		<!-- 메인 컨텐츠 -->
		<main class="container-wrap js-container-wrap">
			<!-- 컨테이너 -->
			<div class="container page--auth js-container justify-spacing-def pdt24">
				<sections class="container__body">
					<div class="body__content">
						<div class="flex-column">
							<!-- 약관동의 -->
							<div class="form-box auth__terms-agree js-checked--handle"><!-- 2025-03-31 freeze 클래스 제거 -->
								<div class="form__item js-form-item drop-box js-drop-box"><!-- [D] 2025-03-31 'js-drop-box' 클래스 추가,  활성화 시 'item--on', 읽기전용, 비활성화 시 item--disabled, 오류 시 item--error -->
									<!-- 전체 동의하기 -->
									<div class="form__item-header">
										<div class="input-type--check"><!-- [D] 인증번호 요청 시 readonly 클래스 추가 -->
											<label class="flex-row">
												<input type="checkbox" class="js-all-check"><!-- [D] 인증번호 요청 시 readonly 추가 -->
												<span>전체 동의하기</span>
											</label>
											<!-- 2025-03-31 [D] js-drop-trigger 추가 -->
											<button class="drop-trigger js-drop-trigger">
												<i class="icon icon--arrow-24"></i>
											</button>
											<!-- // 2025-03-31 -->
										</div>
									</div>

									<!-- 개별 동의하기 -->
									<div class="form__item-wrap drop-content" style="display: none;"><!-- 2025-03-31 [D] 'js-drop-content' 클래스 추가  -->
										<!-- (필수) 통신사 이용약관 -->
										<div class="input-type--check"><!-- [D] 인증번호 요청 시 readonly 클래스 추가 -->
											<label class="flex-row">
												<input type="checkbox">
												<span>(필수) 통신사 이용약관</span>
											</label>
											<!-- 버튼 -->
											<button class="terms-view--button" onclick="alert('1234')">
												<i class="icon icon--arrow-16"></i>
												<span class="blind">통신사 이용약관 보기</span>
											</button>
										</div>
										<!-- (필수) 본인확인 서비스 이용약관 -->
										<div class="input-type--check"><!-- [D] 인증번호 요청 시 readonly 클래스 추가 -->
											<label class="flex-row">
												<input type="checkbox">
												<span>(필수) 본인확인 서비스 이용약관</span>
											</label>
											<!-- 버튼 -->
											<button class="terms-view--button">
												<i class="icon icon--arrow-16"></i>
												<span class="blind">본인확인 서비스 이용약관 보기</span>
											</button>
										</div>
										<!-- (필수) 개인정보 수집 · 이용 · 취급 · 위탁 동의 -->
										<div class="input-type--check"><!-- [D] 인증번호 요청 시 readonly 클래스 추가 -->
											<label class="flex-row">
												<input type="checkbox">
												<span>(필수) 개인정보 수집 · 이용 · 취급 · 위탁 동의</span>
											</label>
											<!-- 버튼 -->
											<button class="terms-view--button">
												<i class="icon icon--arrow-16"></i>
												<span class="blind">개인정보 수집 · 이용 · 취급 · 위탁 동의 약관 보기</span>
											</button>
										</div>
										<!-- (필수) 고유식별정보 처리 동의 -->
										<div class="input-type--check"><!-- [D] 인증번호 요청 시 readonly 클래스 추가 -->
											<label class="flex-row">
												<input type="checkbox">
												<span>(필수) 고유식별정보 처리 동의</span>
											</label>
											<!-- 버튼 -->
											<button class="terms-view--button">
												<i class="icon icon--arrow-16"></i>
												<span class="blind">고유식별정보 처리 동의 약관 보기</span>
											</button>
										</div>
										<!-- [D] 알뜰폰 선택 시 추가 - 체크 비활성화 -->
										<div class="input-type--check"><!-- [D] 인증번호 요청 시 readonly -->
											<label class="flex-row">
												<input type="checkbox">
												<span>(필수) 알뜰폰 개인정보 제3자 제공 동의</span>
											</label>
											<!-- 버튼 -->
											<button class="terms-view--button">
												<i class="icon icon--arrow-16"></i>
												<span class="blind">알뜰폰 개인정보 제3자 제공 동의 약관 보기</span>
											</button>
										</div>
									</div>
								</div>
							</div>

							<!-- 정보입력 -->
							<div class="form-box js-form-box gap-10">
								<!-- 이름 -->
								<div class="form__item js-form-item"><!-- [D] 인증번호 요청 시 'item--disabled' 클래스 추가 -->
									<div class="form__item-wrap">
										<div class="input-type--box">
											<input type="text" value="" placeholder="이름(실명) 입력"><!-- [D] 이름 입력 -->
											<button type="button" class="input__unit" style="display: none;"><i class="icon icon--close_cr-16"></i></button>
										</div>
									</div>
								</div>

								<!-- 주민등록번호 -->
								<div class="form__item regist-code js-form-item"><!-- [D] 인증번호 요청 시 'item--disabled' 클래스 추가 -->
									<div class="form__item-wrap">
										<div class="input-type--box">
											<input type="text" value="" placeholder="생년월일 6자리" maxlength="6">
											<span class="between-bar">-</span>
											<input type="text" value="" placeholder="0" maxlength="1">
											<div class="currency-box">
												<p class="currency-bullet"></p>
												<p class="currency-bullet"></p>
												<p class="currency-bullet"></p>
												<p class="currency-bullet"></p>
												<p class="currency-bullet"></p>
												<p class="currency-bullet"></p>
											</div>
										</div>
									</div>
								</div>

								<!-- 휴대폰번호 입력 -->
								<div class="form__item phone-box js-form-item"><!-- [D] 인증번호 요청 시 'item--disabled' 클래스 추가 -->
									<div class="form__item-wrap">
										<div class="input-type--box">
											<button type="button" class="input-unit fc-placeholder js-select--result js-popup-open" data-modal="popup-select--telecom">
												<span class="target">통신사 선택</span><i class="icon icon--arrow-16 pointer-bottom"></i>
											</button>
											<input type="tel" value="" placeholder="휴대폰번호 입력" maxlength="11">
										</div>
									</div>
								</div>

								<!-- 인증번호 입력 -->
								<div class="form__item cert-box item--disabled js-form-item"><!-- [D] 인증번호 요청 시 'item--disabled' 클래스 제거 -->
									<div class="form__item-wrap flex-row">
										<div class="input-type--box">
											<input type="tel" value="" placeholder="인증번호 6자리" maxlength="6">
											<span class="shrink-n">05:00</span>
										</div>
										<button class="button button-large button--lv4 js-cert-button">
											<span>인증번호 요청</span>
										</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</sections>
			</div>

			<!-- 플로팅 컨테이너 -->
			<div class="container-floating js-floating-container">
				<article class="floating__box button-box-spacing">
					<a href="#none" class="button button-xl button--lv1 dis"><!-- [D] 활성화 시 'dis' 클래스 제거  -->
						<span>인증하기</span>
					</a>
				</article>
			</div>
		</main>
		<!-- // 메인 컨텐츠 -->


		<!-- 팝업 - 통신사 선택 -->
		<div class="popup-wrap js-popup-wrap" data-modal="popup-select--telecom">
			<div class="popup-container popup--bottom popup-select--type1 box-padding--type2 js-popup-select">
				<section class="popup-container__body">
					<div class="flex-column justify-spacing-def">
						<button type="button" class="select__button js-select-content js-popup-close">
							<span>SKT</span><i class="icon icon--check-24_primary"></i>
						</button>
						<button type="button" class="select__button js-select-content js-popup-close">
							<span>KT</span><i class="icon icon--check-24_primary"></i>
						</button>
						<button type="button" class="select__button js-select-content js-popup-close select"><!-- 선택 시 select 클래스 추가 -->
							<span>LG U+</span><i class="icon icon--check-24_primary"></i>
						</button>
						<button type="button" class="select__button js-select-content js-popup-close">
							<span>SKT 알뜰폰</span><i class="icon icon--check-24_primary"></i>
						</button>
						<button type="button" class="select__button js-select-content js-popup-close">
							<span>KT 알뜰폰</span><i class="icon icon--check-24_primary"></i>
						</button>
						<button type="button" class="select__button js-select-content js-popup-close">
							<span class="target">LG U+ 알뜰폰</span><i class="icon icon--check-24_primary"></i>
						</button>
					</div>
				</section>
			</div>
		</div>
	</div>
</body>
</html>

<!-- // [D] 2025-03-31 현 화면 한정 스크립트 입니다. -->
<script>
	$(function(){
		// 체크박스 요소 선택
		const allChk = $('.js-all-check');
		const dropBox = $('.js-checked--handle .js-drop-box');
		const dropContent = $('.js-checked--handle .js-drop-content');

		// 드롭다운 상태 변경 함수
		const toggleDropdown = function(show) {
			if (show) {
				dropBox.addClass('open');
				dropContent.slideDown(300);
			} else {
				dropBox.removeClass('open');
				dropContent.slideUp(300);
			}
		};

		// 체크박스 상태 업데이트 함수 (동적으로 추가된 체크박스도 포함)
		const updateCheckboxState = function() {
			// 매번 새로 체크박스 요소들을 선택하여 동적 추가된 요소도 포함
			const checkbox = $('.js-checked--handle input').not(allChk);
			const total = checkbox.length;
			const checkedCount = $('.js-checked--handle input:checked').not(allChk).length;
			
			allChk.prop('checked', total === checkedCount);
			toggleDropdown(total !== checkedCount);
		};

		// 전체 동의 체크박스 클릭 이벤트
		allChk.on('click', function() {
			const isChecked = $(this).prop('checked');
			// 동적으로 추가된 체크박스도 포함하여 선택
			$('.js-checked--handle input').not(allChk).prop('checked', isChecked);
			toggleDropdown(!isChecked);
		});

		// 개별 체크박스 클릭 이벤트 (이벤트 위임 사용)
		$('.js-checked--handle').on('click', 'input:not(.js-all-check)', function() {
			updateCheckboxState();
		});

		// DOM 변경 감지를 위한 MutationObserver 설정
		const observer = new MutationObserver(function(mutations) {
			mutations.forEach(function(mutation) {
				if (mutation.type === 'childList' || mutation.type === 'attributes') {
					updateCheckboxState();
				}
			});
		});

		// 체크박스 컨테이너 관찰 시작
		observer.observe($('.js-checked--handle')[0], {
			childList: true,
			subtree: true,
			attributes: true,
			attributeFilter: ['checked'] // checked 속성 변경만 감지
		});

		// 초기 상태 설정
		updateCheckboxState();
	})
</script>
<!-- // [D] 2025-03-31 -->
